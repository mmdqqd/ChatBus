<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title></title>
  <meta name="Keywords" content="关键词,关键词">
  <meta name="description" content="">
  <script src="/js/color-modes.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sidebars/">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
  <!-- 引入 Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- 引入 Bootstrap JS 和 Popper.js (必需的依赖) -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .bi {
      vertical-align: -.125em;
      fill: currentColor;
    }

    .nav-scroller .nav {
      display: flex;
      flex-wrap: nowrap;
      padding-bottom: 1rem;
      margin-top: -1px;
      overflow-x: auto;
      text-align: center;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }
    .r_location {
      height: 45px;
      background: #e5e5e5;

      line-height: 51px;

    }
    .info-card {
      background-color: #0a58ca;
      color: white;
      padding: 20px;
      text-align: center;
      border-radius: 8px;
      box-shadow: 2px 4px 6px rgba(0, 0, 0, 0.1);
    }


    /* 去掉默认的下划线 */
    #out{
      text-decoration: none;  /* 去掉下划线 */
      display: inline-flex;    /* 使用 Flexbox 来实现居中 */
      align-items: center;     /* 垂直居中 */
      justify-content: center; /* 水平居中 */
      padding: 10px 20px;      /* 添加一些内边距 */
      border-radius: 5px;      /* 圆角效果 */
      background-color: #007bff; /* 背景颜色 */
      color: white;            /* 文字颜色 */
      font-size: 16px;         /* 文字大小 */
      border: 2px solid #007bff; /* 边框颜色和背景色一致 */
      transition: all 0.3s ease; /* 添加过渡效果 */
    }

    /* 鼠标悬停时的效果 */
    #out:hover {
      background-color: #0056b3; /* 更深的背景颜色 */
      border-color: #0056b3;     /* 边框颜色 */
      color: white;              /* 保持文字颜色 */
    }
    .dropdown-menu {
      background-color: #007bff;  /* 设置背景颜色为蓝色 */
      color: white;               /* 设置文字颜色为白色 */
      border-radius: 5px;         /* 添加圆角效果 */
      padding: 10px 0;            /* 调整内边距 */
      min-width: 200px;           /* 设置最小宽度 */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 添加阴影 */
    }

    /* 删除默认的内边距、外边距等 */
    .dropdown-menu li {
      padding: 0; /* 去掉li元素的内边距 */
      margin: 0;  /* 去掉li元素的外边距 */
    }

    .dropdown-item {
      color: white; /* 设置文字颜色为白色 */
      padding: 10px 20px; /* 添加一些内边距来增加按钮的大小 */
      border-radius: 5px; /* 为每个菜单项添加圆角 */
      transition: background-color 0.3s; /* 添加过渡效果 */
    }
    /* 鼠标点击时的效果 */
    #out:active {
      background-color: #003366; /* 更深的背景颜色 */
      border-color: #003366;     /* 边框颜色 */
    }
    .bd-mode-toggle .dropdown-menu .active .bi {
      display: block !important;
    }
  </style>
  <link href="/css/sidebars.css" rel="stylesheet">
</head>
<body>
<main class="d-flex flex-nowrap">
  <h1 class="visually-hidden">Sidebars examples</h1>
  <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 280px;">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
      <svg class="bi pe-none me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
      <div class="rd-navbar-brand"><a href="index.html"><img class="brand-logo-light" src="images/logo-default-207x45.png" alt="" width="207" height="45"/></a></div>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item" id="houtai-link" style="display: none;">
        <a href="/zhu" class="nav-link active" aria-current="page">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#home"/></svg>
          电影信息后台
        </a>
      </li>
      <li>
        <a href="/user" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"/></svg>
          个人信息
        </a>
      </li>
      <li>
        <a href="/CrudUser" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#table"/></svg>
          个人信息修改
        </a>
      </li>
      <li id="admin-link" style="display: none;">
        <a href="/admin" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#grid"/></svg>
          管理员修改个人信息
        </a>
      </li>
      <li id="liuyanban-link" style="display: none;">
        <a href="/AdminNews" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#people-circle"/></svg>
          留言板修改
        </a>
      </li>

      <li id="music-link" style="display: none;">
        <a href="/AdminMusic" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#people-circle"/></svg>
          音乐修改
        </a>
      </li>
      <li id="tu-link">
        <a href="/tubiao" class="nav-link text-white">
          <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#people-circle"/></svg>
          前台数据图统计
        </a>
      </li>
    </ul>
    <hr>
    <div class="dropdown">
      <!-- 触发上拉框的按钮 -->
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
        <div class="h_user"></div>
      </a>

      <!-- 上拉框 -->
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton" style="position: absolute; bottom: 100%; left: 0;">
        <li>
          <!-- 登出按钮，点击时触发登出操作 -->
          <a class="button button-default-outline button-md" id="out" href="/login">登出</a>
        </li>
      </ul>
    </div>
  </div>
  <!-- 右侧内容 -->
  <div class="flex-grow-1 p-3">
    <!-- 面包屑导航 -->
      <div class="r_location d-flex justify-content-between align-items-center p-3 bg-light">
        <!-- 左侧位置显示 -->
        <div>
          <i></i>
          <p class="mb-0">您当前所在位置：首页 > 后台中心</p>
        </div>

        <!-- 右侧按钮组 -->
        <div>
          <button type="button" class="btn btn-warning"> <span>
           <a href="/index" style="text-decoration: none; color: inherit;">前台</a>
          </span>
         </button>
          <button type="button" class="btn btn-info">  <span>
            <a href="/login" style="text-decoration: none; color: inherit;">退出登录</a>
          </span>
        </button>
        </div>

    </div>
    <!-- 卡片区域 -->
    <div class="row">
      <div class="col-md-3  mx-3 my-3">
        <div class="info-card">
          <h1 id="total-users">0</h1> <!-- 动态更新的用户数量 -->
          <p>所有用户数</p>
        </div>
      </div>
    </div>
  </div>
</main>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-m8fnrzriS+K9UdaDHdBgNfXMAURqWvA2rK5o/xq2kNx9RG3dZAcKo59qXnE9iLUU" crossorigin="anonymous"></script>

<script src="/js/sidebars.js"></script></body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  $(document).ready(function () {
    let currentUser = ''; // 当前用户的用户名
    let userRole = ''; // 用户角色（身份）
    $.ajax({
      url: '/role',  // 假设这是获取当前用户名的接口
      method: "GET",
      success: function (data) {
        currentUser = data.username; // 保存当前用户名
        userRole = data.role; // 假设接口返回的数据中有角色字段
        // 动态更新页面上的内容
        $('.h_user').html(`当前用户：${currentUser} , 身份：${userRole}`);
      },
      error: function () {
        alert("Error fetching user data!");
      }
    });
  });
</script>
<script>
  var del = document.getElementsByClassName('a_del')
  for (let i = 0; i < del.length; i++) {
    del[i].onclick = function () {
      del[i].parentNode.parentNode.parentNode.remove()
    }
  }


</script>
<script>

  axios.get('/role')
          .then(function (response) {
            // 根据角色控制后台主页链接显示
            if (response.data.role === 'ADMIN') {
              document.getElementById('admin-link').style.display = 'block';  // 显示后台主页链接

            }
          })
          .catch(function (error) {
            console.error("未查询到权限:", error);
          });
</script>
<script>
  axios.get('/role')
          .then(function (response) {
            // 根据角色控制后台主页链接显示
            if (response.data.role === 'ADMIN') {
              document.getElementById('houtai-link').style.display = 'block';  // 显示后台个人信息主页链接
            }
          })
          .catch(function (error) {
            console.error("未查询到权限:", error);
          });
</script>
<script>
  axios.get('/role')
          .then(function (response) {
            // 根据角色控制后台主页链接显示
            if (response.data.role === 'ADMIN') {
              document.getElementById('liuyanban-link').style.display = 'block';  // 显示后台个人信息主页链接
            }
          })
          .catch(function (error) {
            console.error("未查询到权限:", error);
          });
</script>
<script>
  axios.get('/role')
          .then(function (response) {
            // 根据角色控制后台主页链接显示
            if (response.data.role === 'ADMIN') {
              document.getElementById('music-link').style.display = 'block';  // 显示后台个人信息主页链接
            }
          })
          .catch(function (error) {
            console.error("未查询到权限:", error);
          });
</script>
<script>
  // 使用 JavaScript 的 Fetch API 调用后端 API
  async function fetchTotalUsers() {
    try {
      const response = await fetch('/admin/api/total-users'); // 调用 API
      const data = await response.json(); // 解析 JSON 数据
      const totalUsers = data.totalUsers; // 获取 totalUsers 值

      // 将数据更新到页面
      document.getElementById('total-users').textContent = totalUsers;
    } catch (error) {
      console.error('获取用户数量失败:', error); // 错误处理
    }
  }

  // 页面加载后调用 fetchTotalUsers
  window.onload = fetchTotalUsers;
</script>
</body>

</html>
